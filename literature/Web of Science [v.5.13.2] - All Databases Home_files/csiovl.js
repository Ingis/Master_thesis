var style="";var targeturl="";var validated=false;(function(c){var a=c.noop;if(c.browser.msie){a=function(f){var d=c(f).parent(".ui-dialog");var e=d.innerWidth();if(e){d.css("width",e)}}}var b=c.ui.dialog.prototype._init;c.ui.dialog.prototype._init=function(){if(this.options.width=="auto"){var d=this.options.open;this.options.open=function(){a(this);if(d){d.apply(this)}}}if(c.browser.msie&&this.options.hide=="drop"){this.options.hide="fold"}return b.apply(this)}})(jQuery);$("#csi_error").hide();$("#csi_regerror").hide();$("#localsssheader").hide();var checkemailovlstartDialogOpts={autoOpen:false,dialogClass:"ui-dialog-csi",width:"750",height:"auto",modal:true,resizable:false,overlay:{opacity:0.1,background:"#C2C2C2"},close:function(){checkCloseRedirect("csiCheckEmailCloseRedirect");validated=false;$("#checkemailovlstart #checkemail").val("");$("#checkemailovlstart #checkretyemail").val("");$("#checkemailovlstart #csi_regerror").html("");$("#checkemailovlstart #csi_regerror").hide()},open:function(){validated=false;$("#checkEmailValidator1").hide();$("#enterEmailMessage1").hide();$("#enterValidEmailMessage1").hide();$("#checkEmailValidator2").hide();$("#enterEmailMessage2").hide();var a={checkemail1:function(){var c=$("#checkemail");var b=/^([a-zA-Z0-9])(([a-zA-Z0-9])*(['\._-])?([a-zA-Z0-9]))*@(([a-zA-Z0-9\-])+(\.))+([a-zA-Z]{2,4})+$/;if(c.val()==null||c.val()==""){a.emailerror=true;$("#checkEmailValidator1").show();$("#enterEmailMessage1").show();$("#enterValidEmailMessage1").hide();$("#checkEmailValidator2").hide();$("#enterEmailMessage2").hide()}else{if(!b.test(c.val())){a.emailerror=true;$("#checkEmailValidator1").show();$("#enterValidEmailMessage1").show();$("#enterEmailMessage1").hide();$("#checkEmailValidator2").hide();$("#enterEmailMessage2").hide()}else{a.emailerror=false;$("#checkEmailValidator1").hide();$("#enterValidEmailMessage1").hide();$("#enterEmailMessage1").hide()}}},checkemail2:function(){var b=$("#checkemail");var c=$("#checkretyemail");if(b.val()!=""&&a.emailerror==false){if(c.val()==null||c.val()==""){a.checkemailerror=true;$("#checkEmailValidator2").show();$("#enterEmailMessage2").show()}else{a.checkemailerror=false;$("#checkEmailValidator2").hide();$("#enterEmailMessage2").hide()}}},grayOut:function(){var b=$("#checkemailovlstart #checkretyemail");b.prop("disabled",true)},sendForm:function(){$("#checkemailovlstart #csi_regerror").hide();a.checkemail1();a.checkemail2();if(a.emailerror||a.checkemailerror){return false}if($("#checkemail").val()==$("#checkretyemail").val()){validated=true;return checkEmail($("#csiURL").val(),"e1","e2","e3")}$("#checkemailovlstart #csi_regerror").html($("#checkemailovlstart #regEmailUnmatchErrorMessage").val()).show();return false}};$("#checkemailovlstart #continue").click(function(){if(!validated){a.sendForm()}return false});$("#checkemail").keydown(function(b){if(b.keyCode==13){if(!validated){a.sendForm()}return false}});$("#checkretyemail").keydown(function(b){if(b.keyCode==13){if(!validated){a.sendForm()}return false}})}};var csiregistrationovlDialogOpts={autoOpen:false,dialogClass:"ui-dialog-csi",width:"750",height:"auto",modal:true,resizable:false,overlay:{opacity:0.1,background:"#C2C2C2"},close:function(){checkCloseRedirect("csiRegCloseRedirect");$("#checkemailovlstart #checkemail").val("");$("#checkemailovlstart #checkretyemail").val("");$("#csiregistrationovl #csi_regerror").html("");$("#csiregistrationovl #csi_regerror").hide()},open:function(b,c){$("#firstNameValidator").hide();$("#enterFirstName").hide();$("#lastNameValidator").hide();$("#enterLastName").hide();$("#passwordValidator1").hide();$("#enterPassword1").hide();$("#passwordValidator2").hide();$("#enterPassword2Empty").hide();$("#enterPassword2NoMatch").hide();$("#roleValidator").hide();$("#selectRole").hide();$("#subjectAreaValidator").hide();$("#selectSubjectArea").hide();$("#rAndRValidator").hide();$("#acceptRAndR").hide();var a={firstname:function(){if($("#firstName").val()==""){$("#firstNameValidator").show();$("#enterFirstName").show();return false}else{$("#firstNameValidator").hide();$("#enterFirstName").hide();return true}},lastname:function(){if($("#lastName").val()==""){$("#lastNameValidator").show();$("#enterLastName").show();return false}else{$("#lastNameValidator").hide();$("#enterLastName").hide();return true}},checkpassword1:function(){var e=$("#passwordreg");var f=$("#retypePass");var d=/^.*(?=.{8,})(?=.*\d)(?=.*[a-zA-Z])(?=.*[!@#$%^*()~`{}[\]|&_]).*$/;if(!d.test(e.val())){a.passerror=true;$("#passwordValidator1").show();$("#enterPassword1").show();$("#passwordValidator2").hide();$("#enterPassword2Empty").hide();$("#enterPassword2NoMatch").hide();return false}else{a.passerror=false;$("#passwordValidator1").hide();$("#enterPassword1").hide()}return true},checkpassword2:function(){var d=$("#passwordreg");var e=$("#retypePass");if($.trim(e.val())==""){a.errors=true;$("#passwordValidator2").show();$("#enterPassword2Empty").show();$("#enterPassword2NoMatch").hide();return false}else{if(d.val()!=(e.val())){a.errors=true;$("#passwordValidator2").show();$("#enterPassword2Empty").hide();$("#enterPassword2NoMatch").show();return false}else{a.errors=false;$("#passwordValidator2").hide();$("#enterPassword2Empty").hide();$("#enterPassword2NoMatch").hide();return true}}},role:function(){if(!$("#role").val().match("^Select")){$("#roleValidator").hide();$("#selectRole").hide();return true}else{$("#roleValidator").show();$("#selectRole").show();return false}},subject:function(){if(!$("#subject").val().match("^Select")){$("#subjectAreaValidator").hide();$("#selectSubjectArea").hide();return true}else{$("#subjectAreaValidator").show();$("#selectSubjectArea").show();return false}},randr:function(){if($("#rAndR").is(":checked")){$("#rAndRValidator").hide();$("#acceptRAndR").hide();return true}else{$("#rAndRValidator").show();$("#acceptRAndR").show();return false}},grayOut:function(){var d=$("#retypePass");d.prop("disabled",true)}};$("#csiregistrationovl #submit_reg").click(function(){var d=true;if(!a.firstname()){d=false}if(!a.lastname()){d=false}if(!a.checkpassword1()){d=false}if(!a.checkpassword2()){d=false}if(!a.role()){d=false}if(!a.subject()){d=false}if(!a.randr()){d=false}if(d){return submit_regovl()}return false})}};function csicancel(){$("#csiovldialog").dialog("close")}function csiregcheckemailcancel(){$("#checkemailovlstart").dialog("close")}function csiregcancel(){$("#csiregistrationovl").dialog("close")}function opencsiovlfromreg(){var a=$("#csiCheckEmailCloseRedirect").val();$("#csiCheckEmailCloseRedirect").val("");csiregcheckemailcancel();if(a!=null&&a=="yes"){$("#csiCheckEmailCloseRedirect").val("yes")}csiovl("","")}function csiovl(a,d,b){if(b){invokeAutoSubmit()}style=a;targeturl=d;$("#csiovldialog").dialog({title:$("#csiovldialog #csititle").val()});$("#csiovldialog #localsssheader").html("");$("#csiovldialog #localsssheader").hide();$("#localssstext #localsss").hide();$("#localssstext #localsssopen").hide();$("#localSaveError").html("");switch(style){case"":$("#styletext").html($("#csigeneraltext").html());break;case"SETTINGS":$("#styletext").html($("#csisettingstext").html());break;case"ENW":$("#styletext").html($("#csienwtext").html());break;case"RID":$("#styletext").html($("#csiridtext").html());break;case"SSSSave":$("#csiovldialog").dialog({title:$("#csiovldialog #csissssavetitle").val()});$("#csiovldialog #localsssheader").html($("#csissssaveheader").html());$("#csiovldialog #localsssheader").show();$("#styletext").html($("#csissstext").html());$("#localssstext #localsss").show();break;case"SSS":$("#csiovldialog").dialog({title:$("#csiovldialog #csisssopentitle").val()});$("#csiovldialog #localsssheader").html($("#csisssopenheader").html());$("#csiovldialog #localsssheader").show();$("#styletext").html($("#csissstext").html());$("#localssstext #localsssopen").show();$("#localssstext #localsssopen #sssLocalSavedSearchError").hide();break;case"PCT":$("#styletext").html($("#csipcttext").html());break;case"PCTAdd":$("#styletext").html($("#csipcttext").html());break;case"MJL":$("#styletext").html($("#csimjltext").html());break;case"SQC":default:$("#styletext").html($("#csisqctext").html());break}if($.browser.msie){$("#csiovldialog").dialog({height:"100%"});$("#csiovldialog").dialog("open");$("#csiovldialog").removeAttr("style")}else{$("#csiovldialog").dialog("open")}$("#csiovldialog").dialog("option","position","center");$("#csiovldialog").keydown(function(f){if(f.keyCode==13){f.preventDefault();return signIn($("#csiURL").val())}});var c=$("#invalidFileError").val();if(c!=null&&c=="error"){$("#csiCloseRedirect").val("yes");$("#csiCheckEmailCloseRedirect").val("yes");$("#csiRegCloseRedirect").val("yes")}$("#csiovldialog").show()}function csiCheckemailovl(b){if(targeturl==null||targeturl.length<=0){targeturl=b}$("#csi_regerror").html("").hide();var a=$("#csiCloseRedirect").val();$("#csiCloseRedirect").val("");if($.browser.msie){$("#checkemailovlstart").dialog(checkemailovlstartDialogOpts).dialog("option",{height:"100%"});$("#csiovldialog").dialog("close");if(a!=null&&a=="yes"){$("#csiCloseRedirect").val("yes");$("#csiCheckEmailCloseRedirect").val("yes")}$("#checkemailovlstart").dialog("open");$("#checkemailovlstart").removeAttr("style")}else{$("#csiovldialog").dialog("close");$("#checkemailovlstart").dialog(checkemailovlstartDialogOpts).dialog("open")}$("#checkemailovlstart").dialog("option","position","center");$("#checkemailovlstart").keydown(function(c){if(c.keyCode==13){return $("#checkemailovlstart #continue").click()}})}function convertToJSON(a){a=JSON.stringify(a)}function signIn(d){$("#signInImageEnabled").hide();$("#signInImageDisabled").show();var c=$("#currUrl").val();var b="json";var e="";var a=d.replace("csihome.do","signinovl.do");if(!$.support.cors){a+="?jsonp=?";b="jsonp";e="convertToJSON"}$("#rememberme").attr("value",$("#rememberme").attr("checked")?1:0);$.ajax({type:"GET",url:a,data:{SID:$("#SID").val(),email:$("#email").val(),password:$("#password").val(),rememberme:$("#rememberme").val(),overlay:"yes"},jsonpCallback:e,dataType:b,crossDomain:true,xhrFields:{withCredentials:true},success:function(f){$.map(f,function(j,i){if(i=="ERROR"){$("#signInImageEnabled").show();$("#signInImageDisabled").hide();$("#csi_error").html(j[0]);$("#csi_error").show()}else{if(i=="CHECKRANDR"){$("#signInImageEnabled").show();$("#signInImageDisabled").hide();var g=j;var h=d.replace("csihome.do","signinTerms.do");h+="?SID="+$("#SID").val()+"&rurl="+encodeURIComponent(c)+"&email="+encodeURIComponent($("#email").val())+"&password="+encodeURIComponent($("#password").val())+"&userID="+g+"&product=Portal";$(location).attr("href",h)}else{switch(style){case"":window.location.reload();break;case"SETTINGS":$(location).attr("href",c);break;case"ENW":$(location).attr("href",c);open_location(targeturl,"_ENW_");break;case"RID":$(location).attr("href",c);open_location(targeturl,"_RID_");break;case"SSSSave":c+="&newCurrUrl="+encodeURIComponent(c);$(location).attr("href",c);break;case"PCTAdd":c+="&newCurrUrl="+encodeURIComponent(c);$(location).attr("href",c);break;case"SSS":c=c.replace("&localRunSearchStatus=error","");targeturl+="&rurl="+encodeURIComponent(c);$(location).attr("href",targeturl);break;case"PCT":c=$("#rurl").val();targeturl+="&rurl="+c;$(location).attr("href",targeturl);break;case"MJL":c=$("#rurl").val();targeturl+="&rurl="+c;$(location).attr("href",targeturl);break;case"SQC":c=$("#rurl").val();targeturl+="&rurl="+c;$(location).attr("href",targeturl);break;default:targeturl+="&rurl="+c;$(location).attr("href",targeturl);break}}}})},error:function(f){$("#signInImageEnabled").show();$("#signInImageDisabled").hide();if(!f.responseText){$(location).attr("href",c)}else{$("#csi_error").html(f.responseText);$("#csi_error").show()}}})}function set_autocookie(e,d,b,g){var c="json";var f="";var a=e.replace("csihome.do","setautocookie.do");if(!$.support.cors){a+="?jsonp=?";c="jsonp";f="convertToJSON"}$.ajax({type:"GET",url:a,data:{SID:$("#SID").val(),email:d,password:b,rememberme:g,overlay:"yes"},jsonpCallback:f,dataType:c,crossDomain:true,xhrFields:{withCredentials:true},success:function(h){},error:function(h){}})}function inputPasswd(e,c){var d=$("#currUrl").val();var b="json";var f="";var a=$("#csiURL").val().replace("csihome.do","signinovl.do");if(!$.support.cors){a+="?jsonp=?";b="jsonp";f="convertToJSON"}$.ajax({type:"GET",url:a,data:{SID:$("#SID").val(),email:c,password:$("#passwd").val(),overlay:"yes"},jsonpCallback:f,dataType:b,crossDomain:true,success:function(g){$.map(g,function(k,j){if(j=="ERROR"){$("#csi_regerrorpw").html(k[0]);$("#csi_regerrorpw").show(0,function(){})}else{if(j=="CHECKRANDR"){var h=k;var i=$("#csiURL").val().replace("csihome.do","signinTerms.do");i+="?SID="+$("#SID").val()+"&rurl="+encodeURIComponent(d)+"&email="+encodeURIComponent(c)+"&password="+encodeURIComponent($("#passwd").val())+"&userID="+h+"&product=Portal";$(location).attr("href",i)}else{switch(style){case"":window.location.reload();break;case"SETTINGS":$("#styletext").html($("#csisettingstext").html());$(location).attr("href",d);break;case"ENW":$(location).attr("href",d);open_location(targeturl,"_ENW_");break;case"RID":$(location).attr("href",d);open_location(targeturl,"_RID_");break;case"SSS":d=$("#rurl").val();case"PCT":d=$("#rurl").val();case"MJL":d=$("#rurl").val();case"SQC":d=$("#rurl").val();default:targeturl+="&rurl="+d;$(location).attr("href",targeturl);break}}}})},error:function(g){if(!g.responseText){$(location).attr("href",d)}else{$("#csiregistrationovl #csi_regerror").html(g.responseText);$("#csiregistrationovl #csi_regerror").show()}}})}function checkEmail(g,d,b,a){var f=$("#currUrl").val();var c="html";var e=$("#checkemailovlstart #checkemail").val();var h="";if($.support.cors&&g){h=g;h=h.replace("csihome.do","checkemailovl.do");checkEmailCORS(f,h,c,e)}if(!h){h="OutboundService.do?action=go&mode=csiceService";checkEmailOutboundService(f,h,c,e)}}function checkEmailCORS(c,d,a,b){$.ajax({type:"GET",url:d,data:{email:b,SID:$("#SID").val(),product:"UA",overlay:"yes"},dataType:a,crossDomain:true,xhrFields:{withCredentials:true},success:function(e){$("#csiCheckEmailCloseRedirect").val("");$("#csiregistrationovl").dialog(csiregistrationovlDialogOpts).html(e);$("#checkemailovlstart").dialog("close");if($.browser.msie){$("#csi_regerrorpw").hide();$("#csiregistrationovl").dialog({height:"100%"});$("#csiregistrationovl").dialog("open");$("#csiregistrationovl").removeAttr("style");$("#csiregistrationovl").dialog("option","position","center");$("#csi_regerrorpw").hide();$("#csiregistrationovl").css("overflow","hidden")}else{$("#csi_regerrorpw").hide();$("#csiregistrationovl").dialog("open");$("#csiregistrationovl").dialog("option","position","center");$("#csi_regerrorpw").hide();$("#csiregistrationovl").css("overflow","hidden")}},error:function(e){if(!e.responseText){$(location).attr("href",c)}else{$("#csiregistrationovl").dialog(csiregistrationovlDialogOpts).html(e);$("#checkemailovlstart").dialog("close");$("#csiregistrationovl").dialog("open")}}})}function checkEmailOutboundService(c,d,a,b){$.ajax({type:"GET",url:d,data:{email:b,SID:$("#SID").val(),product:"UA",overlay:"yes"},dataType:a,success:function(e){$("#csiCheckEmailCloseRedirect").val("");$("#csiregistrationovl").dialog(csiregistrationovlDialogOpts).html(e);$("#checkemailovlstart").dialog("close");if($.browser.msie){$("#csi_regerrorpw").hide();$("#csiregistrationovl").dialog({height:"100%"});$("#csiregistrationovl").dialog("open");$("#csiregistrationovl").removeAttr("style");$("#csiregistrationovl").dialog("option","position","center");$("#csi_regerrorpw").hide();$("#csiregistrationovl").css("overflow","hidden")}else{$("#csi_regerrorpw").hide();$("#csiregistrationovl").dialog("open");$("#csiregistrationovl").dialog("option","position","center");$("#csi_regerrorpw").hide();$("#csiregistrationovl").css("overflow","hidden")}},error:function(e){if(!e.responseText){$(location).attr("href",c)}else{$("#csiregistrationovl").dialog(csiregistrationovlDialogOpts).html(e);$("#checkemailovlstart").dialog("close");$("#csiregistrationovl").dialog("open")}}})}function submit_regovl(){var d=$("#csiURL").val();var c=$("#currUrl").val();c=c.replace("&localRunSearchStatus=error","");if(targeturl==null||targeturl.length<=0){targeturl=c}targeturl=targeturl+"&rurl="+encodeURIComponent(c);if(style=="SSSSave"||style=="PCTAdd"){targeturl=c+"&newCurrUrl="+encodeURIComponent(c)}var a="html";var b="";if($.support.cors&&d){b=d;b=b.replace("csihome.do","registerovl.do");registerCORS(targeturl,b,a)}if(!b){b="OutboundService.do?action=go&mode=csiregService";registerOutboundService(targeturl,b,a)}}function registerCORS(b,c,a){$.ajax({type:"GET",url:c,data:{SID:$("#SID").val(),product:"UA",rurl:b,email:document.getElementById("regemail").value,fname:document.getElementById("firstName").value,lname:document.getElementById("lastName").value,minitial:document.getElementById("middleInit").value,password:document.getElementById("passwordreg").value,role:document.getElementById("role").value,subject:document.getElementById("subject").value,biblio:document.getElementById("biblio").value,optinout:$("input:radio[name=optinout]:checked").val(),auto:$("input:radio[name=auto]:checked").val(),rAndr:"rAndr",overlay:"yes"},dataType:a,crossDomain:true,xhrFields:{withCredentials:true},success:function(d){$("#csiRegCloseRedirect").val("");$("#csiregistrationovl").dialog("close");$("#csiregistrationovl").html(d);$("#csiRegCloseRedirect").val("yes");if($.browser.msie){$("#csiregistrationovl").dialog("option","height","auto")}$("#csiregistrationovl").dialog("open");$("#csiregistrationovl").dialog("option","width",600);$("#csiregistrationovl").dialog("option","position","center")},error:function(d){if(!d.responseText){$(location).attr("href",returl)}else{$("#csiregistrationovl").html(d);$("#csiregistrationovl").dialog("option","width",600);$("#csiregistrationovl").dialog("option","position","center")}}})}function registerOutboundService(b,c,a){$.ajax({type:"GET",url:c,data:{SID:$("#SID").val(),product:"UA",rurl:b,email:document.getElementById("regemail").value,fname:document.getElementById("firstName").value,lname:document.getElementById("lastName").value,minitial:document.getElementById("middleInit").value,password:document.getElementById("passwordreg").value,role:document.getElementById("role").value,subject:document.getElementById("subject").value,biblio:document.getElementById("biblio").value,optinout:$("input:radio[name=optinout]:checked").val(),auto:$("input:radio[name=auto]:checked").val(),rAndr:"rAndr",overlay:"yes"},dataType:a,success:function(d){set_autocookie($("#csiURL").val(),document.getElementById("regemail").value,document.getElementById("passwordreg").value,$("input:radio[name=auto]:checked").val());$("#csiRegCloseRedirect").val("");$("#csiregistrationovl").dialog("close");$("#csiregistrationovl").html(d);$("#csiRegCloseRedirect").val("yes");if($.browser.msie){$("#csiregistrationovl").dialog("option","height","auto")}$("#csiregistrationovl").dialog("open");$("#csiregistrationovl").dialog("option","width",600);$("#csiregistrationovl").dialog("option","position","center")},error:function(d){if(!d.responseText){$(location).attr("href",returl)}else{$("#csiregistrationovl").html(d);$("#csiregistrationovl").dialog("option","width",600);$("#csiregistrationovl").dialog("option","position","center")}}})}function checkEmail_cors(a,f,d,c){var i=$("#currUrl").val();var g="json";var b="";var h=a.replace("csihome.do","checkemailovl.do");if(!$.support.cors){h+="?jsonp=?";g="jsonp";b="convertToJSON"}var e=$("#checkemailovlstart #checkemail").val();$.ajax({type:"GET",url:h,data:{email:e,SID:$("#SID").val(),product:"UA",rurl:"rurl",overlay:"yes"},jsonpCallback:b,dataType:g,crossDomain:true,contentType:"application/json; charset=utf-8",success:function(j){},error:function(j){if(!j.responseText){$(location).attr("href",i)}else{$("#csiregistrationovl").html(j.responseText);$("#checkemailovlstart").dialog("close");$("#csiregistrationovl").dialog("open")}}})}function submit_regovl_cors(){var d=$("#currUrl").val();var a="json";var e="";var c=$("#csiURL").val();var b=c.replace("csihome.do","registerovl.do");if(!$.support.cors){b+="?jsonp=?";a="jsonp";e="convertToJSON"}$.ajax({type:"POST",url:b,data:{SID:$("#SID").val(),email:document.getElementById("regemail").value,fname:document.getElementById("firstName").value,lname:document.getElementById("lastName").value,minitial:document.getElementById("middleInit").value,password:document.getElementById("passwordreg").value,role:document.getElementById("role").value,subject:document.getElementById("subject").value,biblio:document.getElementById("biblio").value,optinout:$("input:radio[name=optinout]:checked").val(),auto:$("input:radio[name=auto]:checked").val(),rAndr:"rAndr",overlay:"yes"},jsonpCallback:e,dataType:a,crossDomain:true,success:function(f){alert("success")},error:function(f){alert("error");if(!f.responseText){$(location).attr("href",d)}else{$("#csiregistrationovl").html(f.responseText)}}})}function validateLocalSSSFileName(a){if(a==null||$.trim(a)==""){$("#localssstext #localsssopen #sssLocalSavedSearchError").show();return false}return true}function checkAndDisplayOpenSSSFileError(a){var b=$("#invalidFileError").val();if(b!=null&&b=="error"){csiovl("SSS",a);$("#localssstext #localsssopen #sssLocalSavedSearchError").show();$("#csiCloseRedirect").val("yes");$("#csiCheckEmailCloseRedirect").val("yes");$("#csiRegCloseRedirect").val("yes")}}function checkCloseRedirect(c){var b=$("#"+c).val();if(b!=null&&b!=""&&b=="yes"){var a=$("#currUrl").val();a=a.replace("&localRunSearchStatus=error","");$(location).attr("href",a)}};